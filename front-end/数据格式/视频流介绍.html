<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>视频流介绍 | NightWatch</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/images/favicon.png">
    <meta name="description" content="编程，从入门到入土">
    
    <link rel="preload" href="/assets/css/0.styles.4c261fea.css" as="style"><link rel="preload" href="/assets/js/app.4c2e739d.js" as="script"><link rel="preload" href="/assets/js/2.4829a41e.js" as="script"><link rel="preload" href="/assets/js/1.21e39df5.js" as="script"><link rel="preload" href="/assets/js/82.d35d2183.js" as="script"><link rel="prefetch" href="/assets/js/10.36ab4607.js"><link rel="prefetch" href="/assets/js/100.4eeb71e4.js"><link rel="prefetch" href="/assets/js/101.4aa0b63a.js"><link rel="prefetch" href="/assets/js/102.b793f58d.js"><link rel="prefetch" href="/assets/js/103.2d6e6b16.js"><link rel="prefetch" href="/assets/js/104.8a7700d9.js"><link rel="prefetch" href="/assets/js/105.a815f30f.js"><link rel="prefetch" href="/assets/js/106.e42e205d.js"><link rel="prefetch" href="/assets/js/107.d684aa5a.js"><link rel="prefetch" href="/assets/js/108.06601f3a.js"><link rel="prefetch" href="/assets/js/109.7732a036.js"><link rel="prefetch" href="/assets/js/11.9d26e9af.js"><link rel="prefetch" href="/assets/js/110.6444afac.js"><link rel="prefetch" href="/assets/js/111.2db36f19.js"><link rel="prefetch" href="/assets/js/112.2e7e45bb.js"><link rel="prefetch" href="/assets/js/113.2e24901c.js"><link rel="prefetch" href="/assets/js/114.d01f8b34.js"><link rel="prefetch" href="/assets/js/115.fb1c7f69.js"><link rel="prefetch" href="/assets/js/12.0b61f8e9.js"><link rel="prefetch" href="/assets/js/13.152b21ae.js"><link rel="prefetch" href="/assets/js/14.601864c0.js"><link rel="prefetch" href="/assets/js/15.1ca2d588.js"><link rel="prefetch" href="/assets/js/16.f4f9fc10.js"><link rel="prefetch" href="/assets/js/17.c0c7e874.js"><link rel="prefetch" href="/assets/js/18.1dcc6d96.js"><link rel="prefetch" href="/assets/js/19.eb1d2ccc.js"><link rel="prefetch" href="/assets/js/20.e0b38ec4.js"><link rel="prefetch" href="/assets/js/21.78e23c64.js"><link rel="prefetch" href="/assets/js/22.2aa7a141.js"><link rel="prefetch" href="/assets/js/23.b472034c.js"><link rel="prefetch" href="/assets/js/24.ffd75071.js"><link rel="prefetch" href="/assets/js/25.5db5e647.js"><link rel="prefetch" href="/assets/js/26.30ec1f20.js"><link rel="prefetch" href="/assets/js/27.49edfcab.js"><link rel="prefetch" href="/assets/js/28.14d4ba09.js"><link rel="prefetch" href="/assets/js/29.8a0b2487.js"><link rel="prefetch" href="/assets/js/3.ce969d4f.js"><link rel="prefetch" href="/assets/js/30.d5f0ff30.js"><link rel="prefetch" href="/assets/js/31.52fdc673.js"><link rel="prefetch" href="/assets/js/32.5a3a17cf.js"><link rel="prefetch" href="/assets/js/33.f04e0700.js"><link rel="prefetch" href="/assets/js/34.2c8a3883.js"><link rel="prefetch" href="/assets/js/35.f612db95.js"><link rel="prefetch" href="/assets/js/36.47d7142e.js"><link rel="prefetch" href="/assets/js/37.b715a4b3.js"><link rel="prefetch" href="/assets/js/38.54701470.js"><link rel="prefetch" href="/assets/js/39.d0b3d043.js"><link rel="prefetch" href="/assets/js/4.b8125ad6.js"><link rel="prefetch" href="/assets/js/40.ced28052.js"><link rel="prefetch" href="/assets/js/41.755b6936.js"><link rel="prefetch" href="/assets/js/42.7b23c8e9.js"><link rel="prefetch" href="/assets/js/43.3a258be5.js"><link rel="prefetch" href="/assets/js/44.a80ad4c9.js"><link rel="prefetch" href="/assets/js/45.99e7b293.js"><link rel="prefetch" href="/assets/js/46.407ea568.js"><link rel="prefetch" href="/assets/js/47.5102632e.js"><link rel="prefetch" href="/assets/js/48.23899582.js"><link rel="prefetch" href="/assets/js/49.193fb94c.js"><link rel="prefetch" href="/assets/js/5.2d50631a.js"><link rel="prefetch" href="/assets/js/50.704fb2f3.js"><link rel="prefetch" href="/assets/js/51.51e62f1d.js"><link rel="prefetch" href="/assets/js/52.c50cb195.js"><link rel="prefetch" href="/assets/js/53.ee31729d.js"><link rel="prefetch" href="/assets/js/54.42d1bbc4.js"><link rel="prefetch" href="/assets/js/55.d1efe92d.js"><link rel="prefetch" href="/assets/js/56.716dbd5d.js"><link rel="prefetch" href="/assets/js/57.5e7894a9.js"><link rel="prefetch" href="/assets/js/58.0c8c6b99.js"><link rel="prefetch" href="/assets/js/59.38df62de.js"><link rel="prefetch" href="/assets/js/6.674e2ad9.js"><link rel="prefetch" href="/assets/js/60.b80e4ec9.js"><link rel="prefetch" href="/assets/js/61.b398bd81.js"><link rel="prefetch" href="/assets/js/62.eb8bfe0b.js"><link rel="prefetch" href="/assets/js/63.08313012.js"><link rel="prefetch" href="/assets/js/64.a677dc6c.js"><link rel="prefetch" href="/assets/js/65.66cd4010.js"><link rel="prefetch" href="/assets/js/66.e5efa106.js"><link rel="prefetch" href="/assets/js/67.7b0dc19d.js"><link rel="prefetch" href="/assets/js/68.61418607.js"><link rel="prefetch" href="/assets/js/69.7bfb6b8c.js"><link rel="prefetch" href="/assets/js/7.f1dd9a86.js"><link rel="prefetch" href="/assets/js/70.29e56697.js"><link rel="prefetch" href="/assets/js/71.6115bdfa.js"><link rel="prefetch" href="/assets/js/72.176f9352.js"><link rel="prefetch" href="/assets/js/73.197dadf0.js"><link rel="prefetch" href="/assets/js/74.826c5ad7.js"><link rel="prefetch" href="/assets/js/75.c07eb469.js"><link rel="prefetch" href="/assets/js/76.f9ce36cb.js"><link rel="prefetch" href="/assets/js/77.662141b3.js"><link rel="prefetch" href="/assets/js/78.058df7d8.js"><link rel="prefetch" href="/assets/js/79.d0d7a758.js"><link rel="prefetch" href="/assets/js/80.a4b63be0.js"><link rel="prefetch" href="/assets/js/81.ecfaf354.js"><link rel="prefetch" href="/assets/js/83.8e83e510.js"><link rel="prefetch" href="/assets/js/84.f8c00045.js"><link rel="prefetch" href="/assets/js/85.e7a71c25.js"><link rel="prefetch" href="/assets/js/86.f4ab1d65.js"><link rel="prefetch" href="/assets/js/87.598dc473.js"><link rel="prefetch" href="/assets/js/88.ece415e2.js"><link rel="prefetch" href="/assets/js/89.ac71f173.js"><link rel="prefetch" href="/assets/js/90.7d1286bc.js"><link rel="prefetch" href="/assets/js/91.2533e390.js"><link rel="prefetch" href="/assets/js/92.a41fa969.js"><link rel="prefetch" href="/assets/js/93.29606e4f.js"><link rel="prefetch" href="/assets/js/94.d993a3e4.js"><link rel="prefetch" href="/assets/js/95.80205d7f.js"><link rel="prefetch" href="/assets/js/96.c449ef7f.js"><link rel="prefetch" href="/assets/js/97.28d61a10.js"><link rel="prefetch" href="/assets/js/98.c99a39be.js"><link rel="prefetch" href="/assets/js/99.3324f1e5.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.271bc088.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4c261fea.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">NightWatch</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端开发" class="dropdown-title"><span class="title">前端开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端开发" class="mobile-dropdown-title"><span class="title">前端开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end/Basic/" class="nav-link">
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/front-end/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/front-end/前端工程化/" class="nav-link">
  前端工程化
</a></li><li class="dropdown-item"><!----> <a href="/front-end/性能优化/" class="nav-link">
  性能优化
</a></li><li class="dropdown-item"><!----> <a href="/front-end/数据格式/" class="nav-link">
  数据格式
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端开发" class="dropdown-title"><span class="title">后端开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端开发" class="mobile-dropdown-title"><span class="title">后端开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/back-end/environment/" class="nav-link">
  环境配置
</a></li><li class="dropdown-item"><!----> <a href="/back-end/mysql/" class="nav-link">
  MySQL数据库
</a></li><li class="dropdown-item"><!----> <a href="/back-end/python/" class="nav-link">
  Python
</a></li><li class="dropdown-item"><!----> <a href="/back-end/springboot/" class="nav-link">
  SpringBoot
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GIS开发" class="dropdown-title"><span class="title">GIS开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="GIS开发" class="mobile-dropdown-title"><span class="title">GIS开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/gis/GIS原理/" class="nav-link">
  GIS原理
</a></li><li class="dropdown-item"><!----> <a href="/gis/WebGIS/" class="nav-link">
  WebGIS开发
</a></li><li class="dropdown-item"><!----> <a href="/gis/地图学/" class="nav-link">
  地图学
</a></li><li class="dropdown-item"><!----> <a href="/gis/数据库/" class="nav-link">
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/gis/tools/" class="nav-link">
  GIS工具
</a></li></ul></div></div><div class="nav-item"><a href="/rong/" class="nav-link">
  Rong
</a></div><div class="nav-item"><a href="/others/" class="nav-link">
  其他
</a></div><div class="nav-item"><a href="/test/1.html" class="nav-link">
  测试
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端开发" class="dropdown-title"><span class="title">前端开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端开发" class="mobile-dropdown-title"><span class="title">前端开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end/Basic/" class="nav-link">
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/front-end/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/front-end/前端工程化/" class="nav-link">
  前端工程化
</a></li><li class="dropdown-item"><!----> <a href="/front-end/性能优化/" class="nav-link">
  性能优化
</a></li><li class="dropdown-item"><!----> <a href="/front-end/数据格式/" class="nav-link">
  数据格式
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端开发" class="dropdown-title"><span class="title">后端开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端开发" class="mobile-dropdown-title"><span class="title">后端开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/back-end/environment/" class="nav-link">
  环境配置
</a></li><li class="dropdown-item"><!----> <a href="/back-end/mysql/" class="nav-link">
  MySQL数据库
</a></li><li class="dropdown-item"><!----> <a href="/back-end/python/" class="nav-link">
  Python
</a></li><li class="dropdown-item"><!----> <a href="/back-end/springboot/" class="nav-link">
  SpringBoot
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GIS开发" class="dropdown-title"><span class="title">GIS开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="GIS开发" class="mobile-dropdown-title"><span class="title">GIS开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/gis/GIS原理/" class="nav-link">
  GIS原理
</a></li><li class="dropdown-item"><!----> <a href="/gis/WebGIS/" class="nav-link">
  WebGIS开发
</a></li><li class="dropdown-item"><!----> <a href="/gis/地图学/" class="nav-link">
  地图学
</a></li><li class="dropdown-item"><!----> <a href="/gis/数据库/" class="nav-link">
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/gis/tools/" class="nav-link">
  GIS工具
</a></li></ul></div></div><div class="nav-item"><a href="/rong/" class="nav-link">
  Rong
</a></div><div class="nav-item"><a href="/others/" class="nav-link">
  其他
</a></div><div class="nav-item"><a href="/test/1.html" class="nav-link">
  测试
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>数据格式</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/front-end/%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F/" aria-current="page" class="sidebar-link">♥常用工具♥</a></li><li><a href="/front-end/数据格式/OBS.html" class="sidebar-link">OBS</a></li><li><a href="/front-end/数据格式/Video.js介绍.html" class="sidebar-link">Video.js介绍</a></li><li><a href="/front-end/数据格式/ffmpeg工具.html" class="sidebar-link">ffmpeg工具</a></li><li><a href="/front-end/数据格式/视频流介绍.html" class="active sidebar-link">视频流介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end/数据格式/视频流介绍.html#视频流介绍" class="sidebar-link">视频流介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end/数据格式/视频流介绍.html#三大直播协议" class="sidebar-link">三大直播协议</a></li><li class="sidebar-sub-header"><a href="/front-end/数据格式/视频流介绍.html#rtsp和rtp" class="sidebar-link">RTSP和RTP</a></li><li class="sidebar-sub-header"><a href="/front-end/数据格式/视频流介绍.html#dash" class="sidebar-link">DASH</a></li><li class="sidebar-sub-header"><a href="/front-end/数据格式/视频流介绍.html#smooth-streaming" class="sidebar-link">Smooth Streaming</a></li><li class="sidebar-sub-header"><a href="/front-end/数据格式/视频流介绍.html#webrtc" class="sidebar-link">WebRTC</a></li><li class="sidebar-sub-header"><a href="/front-end/数据格式/视频流介绍.html#未来发展方向" class="sidebar-link">未来发展方向</a></li></ul></li><li class="sidebar-sub-header"><a href="/front-end/数据格式/视频流介绍.html#相关概念" class="sidebar-link">相关概念</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end/数据格式/视频流介绍.html#流编码格式" class="sidebar-link">流编码格式</a></li><li class="sidebar-sub-header"><a href="/front-end/数据格式/视频流介绍.html#码率" class="sidebar-link">码率</a></li><li class="sidebar-sub-header"><a href="/front-end/数据格式/视频流介绍.html#视频流传输" class="sidebar-link">视频流传输</a></li></ul></li><li class="sidebar-sub-header"><a href="/front-end/数据格式/视频流介绍.html#流媒体服务器" class="sidebar-link">流媒体服务器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end/数据格式/视频流介绍.html#srs" class="sidebar-link">SRS</a></li><li class="sidebar-sub-header"><a href="/front-end/数据格式/视频流介绍.html#ams-adobe-media-server" class="sidebar-link">AMS（Adobe Media Server）</a></li><li class="sidebar-sub-header"><a href="/front-end/数据格式/视频流介绍.html#wowza" class="sidebar-link">wowza</a></li></ul></li><li class="sidebar-sub-header"><a href="/front-end/数据格式/视频流介绍.html#在线测试" class="sidebar-link">在线测试</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end/数据格式/视频流介绍.html#测试工具" class="sidebar-link">测试工具</a></li><li class="sidebar-sub-header"><a href="/front-end/数据格式/视频流介绍.html#测试地址" class="sidebar-link">测试地址</a></li><li class="sidebar-sub-header"><a href="/front-end/数据格式/视频流介绍.html#浏览器插件" class="sidebar-link">浏览器插件</a></li></ul></li><li class="sidebar-sub-header"><a href="/front-end/数据格式/视频流介绍.html#前端接入视频流方案" class="sidebar-link">前端接入视频流方案</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end/数据格式/视频流介绍.html#hls播放解决方案" class="sidebar-link">HLS播放解决方案</a></li><li class="sidebar-sub-header"><a href="/front-end/数据格式/视频流介绍.html#rtmp播放解决方案" class="sidebar-link">RTMP播放解决方案</a></li><li class="sidebar-sub-header"><a href="/front-end/数据格式/视频流介绍.html#rtsp播放解决方案" class="sidebar-link">RTSP播放解决方案</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="视频流介绍"><a href="#视频流介绍" class="header-anchor">#</a> 视频流介绍</h2> <h3 id="三大直播协议"><a href="#三大直播协议" class="header-anchor">#</a> 三大直播协议</h3> <h4 id="rtmp"><a href="#rtmp" class="header-anchor">#</a> RTMP</h4> <p>RTMP（Real Time Message Protocol）由Adobe公司在<strong>2002年</strong>提出的流媒体协议，<strong>未完全公开</strong>。用于解决多路复用和分包的问题。一般传输的是<strong>flv、f4v</strong>格式的流。一般在一个通道上传输命令和数据。</p> <p>优势：</p> <ul><li>支持实时交互和低延迟</li> <li>适用于需要实时交互和快速响应的应用场景，如<strong>虎牙、斗鱼等传统视频直播平台</strong></li></ul> <p>劣势：</p> <ul><li>在移动设备上的支持不如其他协议广泛</li> <li>对防火墙和代理的穿透性较差</li></ul> <h4 id="http-flv"><a href="#http-flv" class="header-anchor">#</a> HTTP-FLV</h4> <p>FLV用http服务器即可实现传统的 流媒体服务器的功能，flv文件体积小，视频质量好。但是要基于flash插件。</p> <p>可使用<strong>flv.js</strong>将flv视频流数据转码，最终传递给h5的video标签进行播放</p> <p>在中国的视频直播行业得到广泛应用</p> <h4 id="hls"><a href="#hls" class="header-anchor">#</a> HLS</h4> <p>HLS(Http Live Streaming) 是苹果公司<strong>2009年</strong>提出，的基于HTTP的流媒体网络传输协议。专属内容包括两部分，一是m3u8描述文件，二是ts流媒体文件。</p> <p><strong>m3u8</strong>文件是指UTF-8编码的m3u文件,m3u文件是记录了索引的纯文本文件，打开时，播放软件根据索引找到对应的音视频文件地址进行在线播放。二级索引中记录了ts文件的地址。</p> <p>将不同速率的版本切片，信息保存在m3u列表文件中。</p> <p>优势：</p> <ul><li>实现自适应码率和跨平台播放</li> <li>广泛支持各种终端设备，适用于<strong>移动和苹果设备上在线视频点播、直播等</strong></li> <li>在不同带宽的网络环境下实现较好的流畅播放效果</li></ul> <p>劣势：</p> <ul><li>实时性差，延迟高，基本在10s+以上</li> <li>不适用于实时互动场景</li></ul> <p><strong>三者对比</strong></p> <table><thead><tr><th></th> <th>RTMP</th> <th>HLS</th> <th>HTTP-FLV</th></tr></thead> <tbody><tr><td>协议</td> <td>TCP长连接</td> <td>HTTP短连接</td> <td>HTTP长连接</td></tr> <tr><td>原理</td> <td>每个时刻收到数据立刻转发</td> <td>集合一段时间的数据，生成ts切片文件，并更新m3u8索引</td> <td>同RTMP，使用HTTP协议(80端口)</td></tr> <tr><td>延时</td> <td>1-3s</td> <td>5-20s</td> <td>1-3s</td></tr> <tr><td>web支持</td> <td>H5需要使用插件</td> <td>支持H5</td> <td>H5中需要使用插件</td></tr> <tr><td>其他</td> <td>跨平台支持差，需要Flash支持</td> <td>播放时需要多次请求，对于网络的质量要求高</td> <td>需要Flash技术支持，不支持多音频流、多视频流、不便于seek</td></tr></tbody></table> <h3 id="rtsp和rtp"><a href="#rtsp和rtp" class="header-anchor">#</a> RTSP和RTP</h3> <p>RTSP（Real-Time Stream Protocol）由Real Networks和Netscape共同提出的流媒体协议。</p> <p>RTSP在1998年提出，RTP在1996年提出。RTSP负责控制流媒体播放、暂停、停止等操作，RTP负责传输媒体数据。</p> <p>一般传输的是<strong>ts、mp4</strong>格式的流</p> <p>优势：</p> <ul><li>较好的实时性和可靠性</li> <li>适用于<strong>流媒体服务器、IP摄像头、视频监控系统</strong>等实时传输场景</li></ul> <p>劣势：</p> <ul><li>需要额外的流媒体服务器和客户端支持，配置和部署相对复杂</li> <li>穿透防火墙和代理存在困难</li></ul> <h3 id="dash"><a href="#dash" class="header-anchor">#</a> DASH</h3> <p>DASH（Dynamic Adaptive Streaming over HTTP）基于HTTP的动态自适应流媒体传输协议。<strong>在2011年提出</strong>，也是将视频切片，通过HTTP传输，实现自适应码率和跨平台播放。</p> <p>DASH支持自适应码率、跨平台播放和多种编码格式，广泛用于<strong>流媒体点播、直播和互联网电视等领域。</strong></p> <h3 id="smooth-streaming"><a href="#smooth-streaming" class="header-anchor">#</a> Smooth Streaming</h3> <p>由Microsoft开发的流媒体传输协议，适用于Windows和Xbox平台，具有自适应码率功能。</p> <h3 id="webrtc"><a href="#webrtc" class="header-anchor">#</a> WebRTC</h3> <p>WebRTC（Web Real-Time Communication）由Google<strong>在2011年</strong>提出。基于UDP协议，支持浏览器的点对点传输，适用于<strong>视频通话，视频会议、远程协作</strong>等场景。</p> <h3 id="未来发展方向"><a href="#未来发展方向" class="header-anchor">#</a> 未来发展方向</h3> <p>基于HTTP的流媒体传输协议，如HLS和DASH</p> <ul><li>平台兼容性</li> <li>自适应码率</li> <li>强大的生态系统</li> <li>支持新的技术和特性</li></ul> <h2 id="相关概念"><a href="#相关概念" class="header-anchor">#</a> 相关概念</h2> <h3 id="流编码格式"><a href="#流编码格式" class="header-anchor">#</a> 流编码格式</h3> <h4 id="h264"><a href="#h264" class="header-anchor">#</a> H264</h4> <p>H264是一种视频编码格式，提供高效的视频压缩和高质量视频传输</p> <h4 id="acc"><a href="#acc" class="header-anchor">#</a> ACC</h4> <p>ACC是一种音频编码格式，用于压缩和传输音频数据</p> <h3 id="码率"><a href="#码率" class="header-anchor">#</a> 码率</h3> <p>码率（比特率），是指数据存储或传输时每秒传输的位数，码率越高，视频/音频质量越高</p> <p>360p是指视频的垂直像素数。</p> <table><thead><tr><th>清晰度</th> <th>分辨率</th> <th>码率范围</th></tr></thead> <tbody><tr><td>360p标清</td> <td>640x360</td> <td>200 Kbps - 700 Kbps</td></tr> <tr><td>480pSD标清</td> <td>854x480</td> <td>500 Kbps - 2 Mbps</td></tr> <tr><td>720p高清</td> <td>1280x720</td> <td>1 Mbps - 4 Mbps</td></tr> <tr><td>1080p全高清</td> <td>1920x1080</td> <td>3 Mbps - 8 Mbps</td></tr> <tr><td>4K超高清</td> <td>3840x2160</td> <td>10 Mbps - 20 Mbps</td></tr></tbody></table> <h3 id="视频流传输"><a href="#视频流传输" class="header-anchor">#</a> 视频流传输</h3> <ol><li>摄像头采集：使用摄像头设备（如USB摄像头、IP摄像头等）采集视频数据。这可以通过操作系统提供的摄像头驱动程序或相关的开发库来实现。</li> <li>编码和压缩：采集到的原始视频数据可能会非常庞大，需要进行编码和压缩以减小数据大小。常见的视频编码标准包括H.264、H.265等。你可以使用编码器来将原始视频数据转换为所需的视频编码格式。</li> <li>流媒体服务器：设置和配置流媒体服务器，如Nginx-RTMP、Wowza Streaming Engine等。确保服务器具备接收和处理视频流的能力，并配置相应的应用程序和流密钥。</li> <li>推流：使用推流软件（如OBS）将编码后的视频流推送到流媒体服务器。在推流过程中，需要提供流媒体服务器的地址、应用程序名称和流密钥等信息。</li> <li>流媒体传输：流媒体服务器接收到推送的视频流后，会根据配置的协议和格式进行传输。常见的流媒体传输协议包括RTMP、HLS、DASH等。服务器会生成相应的流媒体文件（如.ts文件、.m3u8文件等）并提供访问的URL。</li> <li>前端播放：在前端页面上使用流媒体播放器（如Video.js、Hls.js、DPlayer等）进行视频流的播放。通过提供流媒体服务器生成的URL，前端播放器能够加载和播放视频流。</li> <li>播放控制和交互：在前端页面上实现所需的播放控制和交互功能，如播放/暂停、音量控制、全屏等。这可以通过播放器提供的API或自定义的JavaScript代码来实现。</li></ol> <h2 id="流媒体服务器"><a href="#流媒体服务器" class="header-anchor">#</a> 流媒体服务器</h2> <h3 id="srs"><a href="#srs" class="header-anchor">#</a> SRS</h3> <h3 id="ams-adobe-media-server"><a href="#ams-adobe-media-server" class="header-anchor">#</a> AMS（Adobe Media Server）</h3> <h3 id="wowza"><a href="#wowza" class="header-anchor">#</a> wowza</h3> <h2 id="在线测试"><a href="#在线测试" class="header-anchor">#</a> 在线测试</h2> <h3 id="测试工具"><a href="#测试工具" class="header-anchor">#</a> 测试工具</h3> <p>potplayer</p> <div class="language- extra-class"><pre class="language-text"><code>https://potplayer.en.softonic.com/download
</code></pre></div><p>m3u8测试</p> <div class="language- extra-class"><pre class="language-text"><code>https://m3u8play.com/
</code></pre></div><h3 id="测试地址"><a href="#测试地址" class="header-anchor">#</a> 测试地址</h3> <ul><li>hls测试</li></ul> <div class="language- extra-class"><pre class="language-text"><code>// 计时器
http://playertest.longtailvideo.com/adaptive/bipbop/gear4/prog_index.m3u8
https://assets.afcdn.com/video49/20210722/v_645516.m3u8

</code></pre></div><ul><li>rtsp</li></ul> <div class="language- extra-class"><pre class="language-text"><code>
</code></pre></div><ul><li>rtmp</li></ul> <div class="language- extra-class"><pre class="language-text"><code>// 伊拉克 电视台
rtmp://ns8.indexforce.com/home/mystream
// 韩国GOOD TV
rtmp://mobliestream.c3tv.com:554/live/goodtv.sdp
</code></pre></div><ul><li>flv</li></ul> <div class="language- extra-class"><pre class="language-text"><code>// 西瓜视频测试
https://sf1-hscdn-tos.pstatp.com/obj/media-fe/xgplayer_doc_video/flv/xgplayer-demo-360p.flv
</code></pre></div><ul><li>mp4</li></ul> <div class="language- extra-class"><pre class="language-text"><code>http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4
http://vjs.zencdn.net/v/oceans.mp4
https://media.w3.org/2010/05/sintel/trailer.mp4
</code></pre></div><h3 id="浏览器插件"><a href="#浏览器插件" class="header-anchor">#</a> 浏览器插件</h3> <p>RTMP格式需要flash插件支持,可通过flash中心软件进行安装,其中:</p> <ul><li>ActiveX 版：适用于IE浏览器、Edge等软件IE模式调用，Edeg88以下</li> <li>PPAPI版：适用于Chromium内核、360、QQ浏览器等等，Chrome88以下</li> <li>NPAPI版：适用于基于火狐老版本浏览器，Firefox84以下</li></ul> <p>flash在安全性、兼容性、性能以及跨平台等方面的问题，逐渐被H5替代</p> <h2 id="前端接入视频流方案"><a href="#前端接入视频流方案" class="header-anchor">#</a> 前端接入视频流方案</h2> <h3 id="hls播放解决方案"><a href="#hls播放解决方案" class="header-anchor">#</a> HLS播放解决方案</h3> <h4 id="使用video-js"><a href="#使用video-js" class="header-anchor">#</a> 使用video.js</h4> <p>video.js有三种使用方式：</p> <ul><li>video标签</li> <li>div嵌套video标签</li> <li>video-js标签</li></ul> <p>数据配置可以在标签中，也可以在js中。</p> <p>使采用在video标签中引入的方式：</p> <div class="language-html extra-class"><pre class="language-html"><code>// video标签嵌入 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>video</span>
  <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-video<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>video-js<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">controls</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">preload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>auto<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>500px<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>video</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>JS代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> videojs <span class="token keyword">from</span> <span class="token string">&quot;video.js&quot;</span><span class="token punctuation">;</span>
<span class="token function">videojs</span><span class="token punctuation">(</span>
    <span class="token string">&quot;my-video&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">bigPlayButton</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">textTrackDisplay</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">posterImage</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">errorDisplay</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">controlBar</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="使用hls-js-补充"><a href="#使用hls-js-补充" class="header-anchor">#</a> 使用hls.js（补充）</h4> <h3 id="rtmp播放解决方案"><a href="#rtmp播放解决方案" class="header-anchor">#</a> RTMP播放解决方案</h3> <h4 id="使用video-js-2"><a href="#使用video-js-2" class="header-anchor">#</a> 使用video.js</h4> <ul><li>vue2使用vue-video-player</li></ul> <p>vue-video-player 最高版本6.0.0</p> <p>安装插件</p> <div class="language- extra-class"><pre class="language-text"><code>npm install vue-video-player@^5.0.2 --save
npm install videojs-flash@^2.2.1 --save
</code></pre></div><p>页面引入</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">'video.js/dist/video-js.css'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> videoPlayer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-video-player'</span>
<span class="token keyword">import</span> <span class="token string">'videojs-flash'</span>
</code></pre></div><p>完整页面</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>videoPlayer</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>vjs-custom-skin videoPlayer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>videoplayer<span class="token punctuation">&quot;</span></span> 
		<span class="token attr-name">:playsinline</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>90%<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:options</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>playerOptions<span class="token punctuation">&quot;</span></span>
    	<span class="token attr-name">customEventName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changed<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@play</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onPlayerPlay($event)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>videoPlayer</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token string">'video.js/dist/video-js.css'</span>
 	<span class="token keyword">import</span> <span class="token punctuation">{</span> videoPlayer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-video-player'</span>
  <span class="token keyword">import</span> <span class="token string">'videojs-flash'</span>

  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;RTMP&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      videoPlayer
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span><span class="token punctuation">{</span>
        <span class="token literal-property property">playerOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token comment">//测试视频流数据</span>
          <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">&quot;600&quot;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token string">&quot;400&quot;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">language</span><span class="token operator">:</span> <span class="token string">'zh-CN'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">techOrder</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'flash'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token literal-property property">muted</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token literal-property property">autoplay</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token literal-property property">controls</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token literal-property property">loop</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token literal-property property">sources</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'rtmp/mp4'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">'rtmp://mobliestream.c3tv.com:554/live/goodtv.sdp'</span> <span class="token comment">//rtmp流地址</span>
          <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token comment">// poster: 'static/fire/bgpp.png',</span>
          <span class="token comment">// flash:{</span>
          <span class="token comment">//   swf:'static/video-js.swf' //视频屏幕小于400x300时设置</span>
          <span class="token comment">// }</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><ul><li>vue3使用@videojs-player/vue</li></ul> <h4 id="使用flv-js"><a href="#使用flv-js" class="header-anchor">#</a> 使用flv.js</h4> <h3 id="rtsp播放解决方案"><a href="#rtsp播放解决方案" class="header-anchor">#</a> RTSP播放解决方案</h3> <h4 id="利用vlc插件转流"><a href="#利用vlc插件转流" class="header-anchor">#</a> 利用VLC插件转流</h4> <p>浏览器安装VLC插件进行服务器转码映射，得到ogg格式然后播放</p> <p>优点：可以直接播放RTSP，无需任何中介服务器帮助</p> <p>缺点：手动安装插件，基于NPAPI，不被最新的Chrome和Firefox支持，适合兼容IE的项目</p> <h4 id="html5-rtsp-player-websocket-rtsp-proxy"><a href="#html5-rtsp-player-websocket-rtsp-proxy" class="header-anchor">#</a> html5_rtsp_player+websocket_rtsp_proxy</h4> <ol><li>服务器安装streamedian服务器</li> <li>客户端通过video标签播放</li></ol> <h4 id="nginx-nginx-rtmp-module-rtmp转发-已成功"><a href="#nginx-nginx-rtmp-module-rtmp转发-已成功" class="header-anchor">#</a> nginx + nginx-rtmp-module，rtmp转发（已成功）</h4> <p>本方案需要在摄像机登录页面推送rtmp流，因此相当于实现了rtmp流的转发</p> <ol><li>下载视频流测试工具<a href="https://get.videolan.org/vlc/3.0.6/win64/vlc-3.0.6-win64.exe" target="_blank" rel="noopener noreferrer"><strong>vlc</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>安装nginx，<a href="http://nginx-win.ecsds.eu/download/" target="_blank" rel="noopener noreferrer"><strong>下载地址</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，选择nginx 1.7.11.3 Gryphon.zip</li> <li>下载nginx-rtmp-module模块，<a href="https://github.com/arut/nginx-rtmp-module" target="_blank" rel="noopener noreferrer"><strong>官方地址</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，解压后放在nginx安装根目录，百度网盘备用链接</li></ol> <div class="language- extra-class"><pre class="language-text"><code>链接：https://pan.baidu.com/s/1eG-hMjQHFHg0nalFBET1wA
提取码：nutq
</code></pre></div><ol start="4"><li>配置nginx的rtmp模块</li></ol> <div class="language- extra-class"><pre class="language-text"><code>rtmp{
    server{
        listen 1935;
          #转发的地址
        chunk_size 4000;
        application live1 {
            live on;
            allow publish 127.0.0.1;#
            allow play all;
            record off;
        }
    }
}
</code></pre></div><ol start="5"><li>使用OBS推流至rtmp://127.0.0.1:1935/live1</li> <li>使用vlc等工具测试rtmp://127.0.0.1:1935/live1是否能正常播放</li></ol> <h4 id="nginx-rtmp-module-rtmp转hls播放-已成功"><a href="#nginx-rtmp-module-rtmp转hls播放-已成功" class="header-anchor">#</a> nginx-rtmp-module，rtmp转hls播放（已成功）</h4> <p>默认URL</p> <p>http://127.0.0.1/hls1/playlist.m3u8</p> <p>配置方式和rtmp转发类似，不过需要配置hls转码</p> <ol><li>配置hls转码</li></ol> <p>​	hls_path 可以配置在别的路径，容易识别的</p> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">application</span> hls1</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">live</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span> <span class="token comment"># 直播模式，允许客户端通过RTMP进行直播流传输</span>
    <span class="token directive"><span class="token keyword">hls</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span> <span class="token comment"># 启用HLS，允许将直播流转换为HLS格式并进行分片</span>
    <span class="token directive"><span class="token keyword">hls_cleanup</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span> <span class="token comment"># 过期自动清理</span>
    <span class="token directive"><span class="token keyword">hls_nested</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span> <span class="token comment"># 可以嵌套目录存储HLS分片文件</span>
    <span class="token directive"><span class="token keyword">record</span> <span class="token boolean">off</span></span><span class="token punctuation">;</span> <span class="token comment"># 禁用录制功能</span>
    <span class="token directive"><span class="token keyword">hls_fragment</span> <span class="token number">2s</span></span><span class="token punctuation">;</span> <span class="token comment"># 每个hls分片时长</span>
    <span class="token directive"><span class="token keyword">hls_playlist_length</span> <span class="token number">10</span></span><span class="token punctuation">;</span> <span class="token comment"># hls播放列表的分片数目</span>
    <span class="token directive"><span class="token keyword">hls_path</span> <span class="token string">&quot;E:/Program Files/Nginx/nginx-1.7.11.3-Gryphon/hls-path/live1&quot;</span></span><span class="token punctuation">;</span>  <span class="token comment"># HLS片段存储路径</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>配置http访问路径,添加Location</li></ol> <div class="language- extra-class"><pre class="language-text"><code>location /hls1 {
    # Serve HLS fragments
    add_header Access-Control-Allow-Origin *;
    add_header Cache-Control no-cache;
    types {
        application/vnd.apple.mpegurl m3u8;
        video/mp2t ts;
    }
    alias &quot;E:/Program Files/Nginx/nginx-1.7.11.3-Gryphon/hls-path/live1&quot;; # 映射到实际目录
    expires -1; # 不被缓存
}
</code></pre></div><ol start="3"><li>OBS推流到指定URL,进行测试</li></ol> <div class="language- extra-class"><pre class="language-text"><code>rtmp://localhost:1935/hls1
</code></pre></div><ol start="4"><li>VLC测试URL</li></ol> <div class="language- extra-class"><pre class="language-text"><code>http://127.0.0.1:9000/hls1/index.m3u8
</code></pre></div><p>chrome浏览器实测，同时展示8个，会非常卡顿</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7/12/2024, 3:20:19 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/front-end/数据格式/ffmpeg工具.html" class="prev">
        ffmpeg工具
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.4c2e739d.js" defer></script><script src="/assets/js/2.4829a41e.js" defer></script><script src="/assets/js/1.21e39df5.js" defer></script><script src="/assets/js/82.d35d2183.js" defer></script>
  </body>
</html>
