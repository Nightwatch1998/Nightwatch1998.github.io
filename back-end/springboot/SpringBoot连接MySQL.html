<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Springboot 数据库连接 | NightWatch</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/images/favicon.png">
    <meta name="description" content="编程，从入门到入土">
    
    <link rel="preload" href="/assets/css/0.styles.4c261fea.css" as="style"><link rel="preload" href="/assets/js/app.894248b1.js" as="script"><link rel="preload" href="/assets/js/2.4829a41e.js" as="script"><link rel="preload" href="/assets/js/1.21e39df5.js" as="script"><link rel="preload" href="/assets/js/75.1792a08f.js" as="script"><link rel="prefetch" href="/assets/js/10.36ab4607.js"><link rel="prefetch" href="/assets/js/100.141cd216.js"><link rel="prefetch" href="/assets/js/101.50fe2663.js"><link rel="prefetch" href="/assets/js/102.2d3e4f90.js"><link rel="prefetch" href="/assets/js/103.ef57c6b1.js"><link rel="prefetch" href="/assets/js/104.4f71e1e0.js"><link rel="prefetch" href="/assets/js/105.872c1ad3.js"><link rel="prefetch" href="/assets/js/106.a62939ef.js"><link rel="prefetch" href="/assets/js/107.8df127ab.js"><link rel="prefetch" href="/assets/js/108.74509eab.js"><link rel="prefetch" href="/assets/js/109.e1a050a1.js"><link rel="prefetch" href="/assets/js/11.9d26e9af.js"><link rel="prefetch" href="/assets/js/110.306129c3.js"><link rel="prefetch" href="/assets/js/111.9d5f8e90.js"><link rel="prefetch" href="/assets/js/112.288d98e2.js"><link rel="prefetch" href="/assets/js/113.21b129bd.js"><link rel="prefetch" href="/assets/js/114.fd49af70.js"><link rel="prefetch" href="/assets/js/115.b5ccad52.js"><link rel="prefetch" href="/assets/js/116.08045797.js"><link rel="prefetch" href="/assets/js/117.90a88e80.js"><link rel="prefetch" href="/assets/js/118.6cb0f0a4.js"><link rel="prefetch" href="/assets/js/119.10dad049.js"><link rel="prefetch" href="/assets/js/12.0b61f8e9.js"><link rel="prefetch" href="/assets/js/120.1ccf99f9.js"><link rel="prefetch" href="/assets/js/121.54c862fc.js"><link rel="prefetch" href="/assets/js/122.113c3c4a.js"><link rel="prefetch" href="/assets/js/123.bdb92323.js"><link rel="prefetch" href="/assets/js/124.b83ce771.js"><link rel="prefetch" href="/assets/js/125.917d7c83.js"><link rel="prefetch" href="/assets/js/126.264a051b.js"><link rel="prefetch" href="/assets/js/127.311262a0.js"><link rel="prefetch" href="/assets/js/128.c385de0a.js"><link rel="prefetch" href="/assets/js/129.0c713557.js"><link rel="prefetch" href="/assets/js/13.152b21ae.js"><link rel="prefetch" href="/assets/js/130.cc7c8f57.js"><link rel="prefetch" href="/assets/js/131.c91dd105.js"><link rel="prefetch" href="/assets/js/132.ba20494e.js"><link rel="prefetch" href="/assets/js/133.fc4b4b7a.js"><link rel="prefetch" href="/assets/js/134.d2063c82.js"><link rel="prefetch" href="/assets/js/135.dda7e4db.js"><link rel="prefetch" href="/assets/js/136.fffd6442.js"><link rel="prefetch" href="/assets/js/137.c2eb831e.js"><link rel="prefetch" href="/assets/js/138.6abb2232.js"><link rel="prefetch" href="/assets/js/139.ae5e21b6.js"><link rel="prefetch" href="/assets/js/14.601864c0.js"><link rel="prefetch" href="/assets/js/140.515cc7f4.js"><link rel="prefetch" href="/assets/js/141.d7af0e6c.js"><link rel="prefetch" href="/assets/js/142.9c907965.js"><link rel="prefetch" href="/assets/js/143.df1e3a0a.js"><link rel="prefetch" href="/assets/js/144.4477a893.js"><link rel="prefetch" href="/assets/js/145.6c810e51.js"><link rel="prefetch" href="/assets/js/146.1a1b6e31.js"><link rel="prefetch" href="/assets/js/147.070fa3e0.js"><link rel="prefetch" href="/assets/js/148.f21bb231.js"><link rel="prefetch" href="/assets/js/149.de37117f.js"><link rel="prefetch" href="/assets/js/15.1ca2d588.js"><link rel="prefetch" href="/assets/js/150.6e8a0c34.js"><link rel="prefetch" href="/assets/js/151.1256806f.js"><link rel="prefetch" href="/assets/js/152.8cb40fc0.js"><link rel="prefetch" href="/assets/js/153.a62a1a67.js"><link rel="prefetch" href="/assets/js/154.591cd626.js"><link rel="prefetch" href="/assets/js/155.abcdf892.js"><link rel="prefetch" href="/assets/js/156.32fe3712.js"><link rel="prefetch" href="/assets/js/157.959359e2.js"><link rel="prefetch" href="/assets/js/158.d87fee00.js"><link rel="prefetch" href="/assets/js/159.583fd9ae.js"><link rel="prefetch" href="/assets/js/16.f4f9fc10.js"><link rel="prefetch" href="/assets/js/160.6fd29fe1.js"><link rel="prefetch" href="/assets/js/161.de9f46d5.js"><link rel="prefetch" href="/assets/js/162.b023551c.js"><link rel="prefetch" href="/assets/js/163.bfb77da4.js"><link rel="prefetch" href="/assets/js/164.66d6cd13.js"><link rel="prefetch" href="/assets/js/165.206c9ae6.js"><link rel="prefetch" href="/assets/js/166.68665ea9.js"><link rel="prefetch" href="/assets/js/167.f38f9a29.js"><link rel="prefetch" href="/assets/js/168.b6c42ecc.js"><link rel="prefetch" href="/assets/js/169.6c707400.js"><link rel="prefetch" href="/assets/js/17.c0c7e874.js"><link rel="prefetch" href="/assets/js/170.d2e437f2.js"><link rel="prefetch" href="/assets/js/171.530961ae.js"><link rel="prefetch" href="/assets/js/172.71518234.js"><link rel="prefetch" href="/assets/js/173.6e3e267f.js"><link rel="prefetch" href="/assets/js/174.10f11302.js"><link rel="prefetch" href="/assets/js/175.97efe8a3.js"><link rel="prefetch" href="/assets/js/18.1dcc6d96.js"><link rel="prefetch" href="/assets/js/19.eb1d2ccc.js"><link rel="prefetch" href="/assets/js/20.e0b38ec4.js"><link rel="prefetch" href="/assets/js/21.78e23c64.js"><link rel="prefetch" href="/assets/js/22.2aa7a141.js"><link rel="prefetch" href="/assets/js/23.552ccc24.js"><link rel="prefetch" href="/assets/js/24.df43dd39.js"><link rel="prefetch" href="/assets/js/25.96ecf866.js"><link rel="prefetch" href="/assets/js/26.4f2285bc.js"><link rel="prefetch" href="/assets/js/27.eb9c1477.js"><link rel="prefetch" href="/assets/js/28.659a292d.js"><link rel="prefetch" href="/assets/js/29.8a0c6519.js"><link rel="prefetch" href="/assets/js/3.ce969d4f.js"><link rel="prefetch" href="/assets/js/30.61ad33e1.js"><link rel="prefetch" href="/assets/js/31.bb535084.js"><link rel="prefetch" href="/assets/js/32.9cde9bb0.js"><link rel="prefetch" href="/assets/js/33.d854944d.js"><link rel="prefetch" href="/assets/js/34.1a6fb4ca.js"><link rel="prefetch" href="/assets/js/35.a5786e05.js"><link rel="prefetch" href="/assets/js/36.4d26611c.js"><link rel="prefetch" href="/assets/js/37.a3e417ea.js"><link rel="prefetch" href="/assets/js/38.63934bec.js"><link rel="prefetch" href="/assets/js/39.a66ee55b.js"><link rel="prefetch" href="/assets/js/4.b8125ad6.js"><link rel="prefetch" href="/assets/js/40.4320ca5e.js"><link rel="prefetch" href="/assets/js/41.26c4d875.js"><link rel="prefetch" href="/assets/js/42.bb2b42d5.js"><link rel="prefetch" href="/assets/js/43.37393ad9.js"><link rel="prefetch" href="/assets/js/44.f80ecf82.js"><link rel="prefetch" href="/assets/js/45.f3e46d43.js"><link rel="prefetch" href="/assets/js/46.ab9dd200.js"><link rel="prefetch" href="/assets/js/47.d6eb2918.js"><link rel="prefetch" href="/assets/js/48.d38bb593.js"><link rel="prefetch" href="/assets/js/49.070d89fb.js"><link rel="prefetch" href="/assets/js/5.2d50631a.js"><link rel="prefetch" href="/assets/js/50.4e5265c1.js"><link rel="prefetch" href="/assets/js/51.ac2a13be.js"><link rel="prefetch" href="/assets/js/52.0a4800e7.js"><link rel="prefetch" href="/assets/js/53.e3e7d05a.js"><link rel="prefetch" href="/assets/js/54.3df7bd34.js"><link rel="prefetch" href="/assets/js/55.76b3036c.js"><link rel="prefetch" href="/assets/js/56.85893e0e.js"><link rel="prefetch" href="/assets/js/57.9aad0375.js"><link rel="prefetch" href="/assets/js/58.c138b114.js"><link rel="prefetch" href="/assets/js/59.897af365.js"><link rel="prefetch" href="/assets/js/6.674e2ad9.js"><link rel="prefetch" href="/assets/js/60.9707d8b9.js"><link rel="prefetch" href="/assets/js/61.4551eafb.js"><link rel="prefetch" href="/assets/js/62.fe4fbc4d.js"><link rel="prefetch" href="/assets/js/63.3daa6e86.js"><link rel="prefetch" href="/assets/js/64.87c9a821.js"><link rel="prefetch" href="/assets/js/65.68fec546.js"><link rel="prefetch" href="/assets/js/66.efcc969e.js"><link rel="prefetch" href="/assets/js/67.1d2e2204.js"><link rel="prefetch" href="/assets/js/68.55521584.js"><link rel="prefetch" href="/assets/js/69.72e40d21.js"><link rel="prefetch" href="/assets/js/7.f1dd9a86.js"><link rel="prefetch" href="/assets/js/70.366e32cd.js"><link rel="prefetch" href="/assets/js/71.0005d41c.js"><link rel="prefetch" href="/assets/js/72.60243c42.js"><link rel="prefetch" href="/assets/js/73.8aa06698.js"><link rel="prefetch" href="/assets/js/74.f040d30e.js"><link rel="prefetch" href="/assets/js/76.8498112c.js"><link rel="prefetch" href="/assets/js/77.35a9359f.js"><link rel="prefetch" href="/assets/js/78.2f42afc2.js"><link rel="prefetch" href="/assets/js/79.296874b9.js"><link rel="prefetch" href="/assets/js/80.7896791b.js"><link rel="prefetch" href="/assets/js/81.4fa73b6c.js"><link rel="prefetch" href="/assets/js/82.fd31e139.js"><link rel="prefetch" href="/assets/js/83.839b647b.js"><link rel="prefetch" href="/assets/js/84.5275face.js"><link rel="prefetch" href="/assets/js/85.c8b97dda.js"><link rel="prefetch" href="/assets/js/86.f322ae20.js"><link rel="prefetch" href="/assets/js/87.374a2d1e.js"><link rel="prefetch" href="/assets/js/88.034b574f.js"><link rel="prefetch" href="/assets/js/89.6771deab.js"><link rel="prefetch" href="/assets/js/90.99a77caa.js"><link rel="prefetch" href="/assets/js/91.813a51ca.js"><link rel="prefetch" href="/assets/js/92.f231dc7a.js"><link rel="prefetch" href="/assets/js/93.14346e59.js"><link rel="prefetch" href="/assets/js/94.5ac45304.js"><link rel="prefetch" href="/assets/js/95.d7224c2a.js"><link rel="prefetch" href="/assets/js/96.dbdcb8ca.js"><link rel="prefetch" href="/assets/js/97.c519c04a.js"><link rel="prefetch" href="/assets/js/98.1d8b0555.js"><link rel="prefetch" href="/assets/js/99.24472c2b.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.271bc088.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4c261fea.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">NightWatch</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端开发" class="dropdown-title"><span class="title">前端开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端开发" class="mobile-dropdown-title"><span class="title">前端开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end/Basic/" class="nav-link">
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/front-end/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/front-end/前端工程化/" class="nav-link">
  前端工程化
</a></li><li class="dropdown-item"><!----> <a href="/front-end/性能优化/" class="nav-link">
  性能优化
</a></li><li class="dropdown-item"><!----> <a href="/front-end/数据格式/" class="nav-link">
  数据格式
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端开发" class="dropdown-title"><span class="title">后端开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端开发" class="mobile-dropdown-title"><span class="title">后端开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/back-end/environment/" class="nav-link">
  环境配置
</a></li><li class="dropdown-item"><!----> <a href="/back-end/mysql/" class="nav-link">
  MySQL数据库
</a></li><li class="dropdown-item"><!----> <a href="/back-end/python/" class="nav-link">
  Python
</a></li><li class="dropdown-item"><!----> <a href="/back-end/springboot/" class="nav-link router-link-active">
  SpringBoot
</a></li><li class="dropdown-item"><!----> <a href="/back-end/java/" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/back-end/docker/" class="nav-link">
  Docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/computer/linux/" class="nav-link">
  Linux操作系统
</a></li><li class="dropdown-item"><!----> <a href="/computer/windows/" class="nav-link">
  Windows操作系统
</a></li><li class="dropdown-item"><!----> <a href="/computer/graphics/" class="nav-link">
  计算机图形学
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="AI" class="dropdown-title"><span class="title">AI</span> <span class="arrow down"></span></button> <button type="button" aria-label="AI" class="mobile-dropdown-title"><span class="title">AI</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ai/large-model/" class="nav-link">
  大模型
</a></li><li class="dropdown-item"><!----> <a href="/ai/machine-learning/" class="nav-link">
  机器学习
</a></li><li class="dropdown-item"><!----> <a href="/ai/deep-learning/" class="nav-link">
  深度学习
</a></li><li class="dropdown-item"><!----> <a href="/ai/computer-vision/" class="nav-link">
  计算机视觉
</a></li><li class="dropdown-item"><!----> <a href="/ai/NLP/" class="nav-link">
  自然语言处理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GIS开发" class="dropdown-title"><span class="title">GIS开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="GIS开发" class="mobile-dropdown-title"><span class="title">GIS开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/gis/GIS原理/" class="nav-link">
  GIS原理
</a></li><li class="dropdown-item"><!----> <a href="/gis/WebGIS/" class="nav-link">
  WebGIS开发
</a></li><li class="dropdown-item"><!----> <a href="/gis/地图学/" class="nav-link">
  地图学
</a></li><li class="dropdown-item"><!----> <a href="/gis/数据库/" class="nav-link">
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/gis/tools/" class="nav-link">
  GIS工具
</a></li></ul></div></div><div class="nav-item"><a href="/rong/" class="nav-link">
  Rong
</a></div><div class="nav-item"><a href="/others/" class="nav-link">
  其他
</a></div><div class="nav-item"><a href="/test/1.html" class="nav-link">
  测试
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端开发" class="dropdown-title"><span class="title">前端开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端开发" class="mobile-dropdown-title"><span class="title">前端开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end/Basic/" class="nav-link">
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/front-end/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/front-end/前端工程化/" class="nav-link">
  前端工程化
</a></li><li class="dropdown-item"><!----> <a href="/front-end/性能优化/" class="nav-link">
  性能优化
</a></li><li class="dropdown-item"><!----> <a href="/front-end/数据格式/" class="nav-link">
  数据格式
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端开发" class="dropdown-title"><span class="title">后端开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端开发" class="mobile-dropdown-title"><span class="title">后端开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/back-end/environment/" class="nav-link">
  环境配置
</a></li><li class="dropdown-item"><!----> <a href="/back-end/mysql/" class="nav-link">
  MySQL数据库
</a></li><li class="dropdown-item"><!----> <a href="/back-end/python/" class="nav-link">
  Python
</a></li><li class="dropdown-item"><!----> <a href="/back-end/springboot/" class="nav-link router-link-active">
  SpringBoot
</a></li><li class="dropdown-item"><!----> <a href="/back-end/java/" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/back-end/docker/" class="nav-link">
  Docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/computer/linux/" class="nav-link">
  Linux操作系统
</a></li><li class="dropdown-item"><!----> <a href="/computer/windows/" class="nav-link">
  Windows操作系统
</a></li><li class="dropdown-item"><!----> <a href="/computer/graphics/" class="nav-link">
  计算机图形学
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="AI" class="dropdown-title"><span class="title">AI</span> <span class="arrow down"></span></button> <button type="button" aria-label="AI" class="mobile-dropdown-title"><span class="title">AI</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ai/large-model/" class="nav-link">
  大模型
</a></li><li class="dropdown-item"><!----> <a href="/ai/machine-learning/" class="nav-link">
  机器学习
</a></li><li class="dropdown-item"><!----> <a href="/ai/deep-learning/" class="nav-link">
  深度学习
</a></li><li class="dropdown-item"><!----> <a href="/ai/computer-vision/" class="nav-link">
  计算机视觉
</a></li><li class="dropdown-item"><!----> <a href="/ai/NLP/" class="nav-link">
  自然语言处理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GIS开发" class="dropdown-title"><span class="title">GIS开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="GIS开发" class="mobile-dropdown-title"><span class="title">GIS开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/gis/GIS原理/" class="nav-link">
  GIS原理
</a></li><li class="dropdown-item"><!----> <a href="/gis/WebGIS/" class="nav-link">
  WebGIS开发
</a></li><li class="dropdown-item"><!----> <a href="/gis/地图学/" class="nav-link">
  地图学
</a></li><li class="dropdown-item"><!----> <a href="/gis/数据库/" class="nav-link">
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/gis/tools/" class="nav-link">
  GIS工具
</a></li></ul></div></div><div class="nav-item"><a href="/rong/" class="nav-link">
  Rong
</a></div><div class="nav-item"><a href="/others/" class="nav-link">
  其他
</a></div><div class="nav-item"><a href="/test/1.html" class="nav-link">
  测试
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Springboot</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/back-end/springboot/" aria-current="page" class="sidebar-link">♥SpringBoot家族♥</a></li><li><a href="/back-end/springboot/MyBatis从入门到精通.html" class="sidebar-link">MyBatis从入门到精通</a></li><li><a href="/back-end/springboot/MybatisPlus从入门到精通.html" class="sidebar-link">MyBatisPlus从入门到精通</a></li><li><a href="/back-end/springboot/ShardingSphere分库分表.html" class="sidebar-link">ShardingSphere分库分表</a></li><li><a href="/back-end/springboot/SpringBoot参数校验-文档.html" class="sidebar-link">SpringBoot 学习</a></li><li><a href="/back-end/springboot/SpringBoot定时任务.html" class="sidebar-link">SpringBoot定时任务</a></li><li><a href="/back-end/springboot/SpringBoot应用部署.html" class="sidebar-link">SpringBoot应用部署</a></li><li><a href="/back-end/springboot/SpringBoot日志.html" class="sidebar-link">SpringBoot日志</a></li><li><a href="/back-end/springboot/SpringBoot热更新.html" class="sidebar-link">SpringBoot热更新</a></li><li><a href="/back-end/springboot/SpringBoot连接MySQL.html" class="active sidebar-link">Springboot 数据库连接</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/back-end/springboot/SpringBoot连接MySQL.html#spring-jpa-data连接数据库" class="sidebar-link">Spring-Jpa-data连接数据库</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/back-end/springboot/SpringBoot连接MySQL.html#配置" class="sidebar-link">配置</a></li><li class="sidebar-sub-header"><a href="/back-end/springboot/SpringBoot连接MySQL.html#jpa方式特点" class="sidebar-link">JPA方式特点</a></li><li class="sidebar-sub-header"><a href="/back-end/springboot/SpringBoot连接MySQL.html#使用方法" class="sidebar-link">使用方法</a></li></ul></li><li class="sidebar-sub-header"><a href="/back-end/springboot/SpringBoot连接MySQL.html#springboot-mybatis" class="sidebar-link">Springboot-Mybatis</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/back-end/springboot/SpringBoot连接MySQL.html#xml方式使用" class="sidebar-link">xml方式使用</a></li><li class="sidebar-sub-header"><a href="/back-end/springboot/SpringBoot连接MySQL.html#注解方式使用" class="sidebar-link">注解方式使用</a></li><li class="sidebar-sub-header"><a href="/back-end/springboot/SpringBoot连接MySQL.html#两者结合使用" class="sidebar-link">两者结合使用</a></li><li class="sidebar-sub-header"><a href="/back-end/springboot/SpringBoot连接MySQL.html#常见的坑" class="sidebar-link">常见的坑</a></li></ul></li><li class="sidebar-sub-header"><a href="/back-end/springboot/SpringBoot连接MySQL.html#pagehelper插件" class="sidebar-link">PageHelper插件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/back-end/springboot/SpringBoot连接MySQL.html#引入插件" class="sidebar-link">引入插件</a></li><li class="sidebar-sub-header"><a href="/back-end/springboot/SpringBoot连接MySQL.html#配置拦截器插件" class="sidebar-link">配置拦截器插件</a></li><li class="sidebar-sub-header"><a href="/back-end/springboot/SpringBoot连接MySQL.html#使用" class="sidebar-link">使用</a></li></ul></li><li class="sidebar-sub-header"><a href="/back-end/springboot/SpringBoot连接MySQL.html#mybatis-plus" class="sidebar-link">Mybatis Plus</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/back-end/springboot/SpringBoot连接MySQL.html#引入依赖" class="sidebar-link">引入依赖</a></li><li class="sidebar-sub-header"><a href="/back-end/springboot/SpringBoot连接MySQL.html#yml配置" class="sidebar-link">yml配置</a></li><li class="sidebar-sub-header"><a href="/back-end/springboot/SpringBoot连接MySQL.html#使用-基于注解" class="sidebar-link">使用(基于注解)</a></li></ul></li><li class="sidebar-sub-header"><a href="/back-end/springboot/SpringBoot连接MySQL.html#字段隔离多租户" class="sidebar-link">字段隔离多租户</a></li><li class="sidebar-sub-header"><a href="/back-end/springboot/SpringBoot连接MySQL.html#其他插件" class="sidebar-link">其他插件</a></li></ul></li><li><a href="/back-end/springboot/SpringBoot连接Redis.html" class="sidebar-link">SpringBoot连接Redis</a></li><li><a href="/back-end/springboot/SpringBoot集成ElasticSearch.html" class="sidebar-link">SpringBoot集成ElasticSearch</a></li><li><a href="/back-end/springboot/SpringBoot集成Websocket.html" class="sidebar-link">SpringBoot集成Websocket</a></li><li><a href="/back-end/springboot/SpringBoot集成文件.html" class="sidebar-link">SpringBoot集成文件</a></li><li><a href="/back-end/springboot/SpringSecurity从入门到精通.html" class="sidebar-link">SpringSecurity从入门到精通</a></li><li><a href="/back-end/springboot/Springboot连接池.html" class="sidebar-link">Springboot数据库连接池</a></li><li><a href="/back-end/springboot/Springboot配置.html" class="sidebar-link">Springboot环境配置</a></li><li><a href="/back-end/springboot/Spring单元测试.html" class="sidebar-link">Spring单元测试</a></li><li><a href="/back-end/springboot/开源项目学习.html" class="sidebar-link">开源项目学习</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="springboot-数据库连接"><a href="#springboot-数据库连接" class="header-anchor">#</a> Springboot 数据库连接</h1> <h2 id="spring-jpa-data连接数据库"><a href="#spring-jpa-data连接数据库" class="header-anchor">#</a> Spring-Jpa-data连接数据库</h2> <h3 id="配置"><a href="#配置" class="header-anchor">#</a> 配置</h3> <p>yml</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span> <span class="token comment"># 配置数据源</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/test_db<span class="token punctuation">?</span>useSSL=false<span class="token important">&amp;autoReconnect=true&amp;characterEncoding=utf8</span>
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.jdbc.Driver <span class="token comment"># 驱动程序类名</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span>
  <span class="token key atrule">jpa</span><span class="token punctuation">:</span>
    <span class="token key atrule">generate-ddl</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># 禁止jpa生成数据库模式</span>
    <span class="token key atrule">show-sql</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token comment"># 控制台不显示sql语句</span>
    <span class="token key atrule">properties</span><span class="token punctuation">:</span>
      <span class="token key atrule">hibernate</span><span class="token punctuation">:</span>
        <span class="token key atrule">dialect</span><span class="token punctuation">:</span> org.hibernate.dialect.MySQLDialect
        <span class="token key atrule">format_sql</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token comment"># 格式化SQL语句使之更易读</span>
        <span class="token key atrule">use-new-id-generator-mappings</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#不使用新的ID生成器映射</span>
</code></pre></div><p>依赖</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--        java连接器--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.1.47<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--        jpa连接mysql--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-jpa<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.github.wenhao<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jpa-spec<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="jpa方式特点"><a href="#jpa方式特点" class="header-anchor">#</a> JPA方式特点</h3> <ol><li>JPA方式用泛型定义接口，以及方法</li> <li>spec是用于构建动态查询条件的对象</li> <li>pageable是分页对象</li></ol> <h3 id="使用方法"><a href="#使用方法" class="header-anchor">#</a> 使用方法</h3> <ol><li>定义数据仓库接口 继承BaseEntity</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@NoRepositoryBean</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IBaseDao</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">BaseEntity</span><span class="token punctuation">,</span> <span class="token class-name">I</span> <span class="token keyword">extends</span> <span class="token class-name">Serializable</span><span class="token punctuation">&gt;</span></span>
    <span class="token keyword">extends</span> <span class="token class-name">JpaRepository</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span><span class="token class-name">I</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">JpaSpecificationExecutor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>实体对象接口，实体对象，实体对象的查询对象</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BaseEntity</span> <span class="token keyword">extends</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Getter</span>
<span class="token annotation punctuation">@Setter</span>
<span class="token annotation punctuation">@ToString</span>  <span class="token comment">// 自动实现tostring方法</span>
<span class="token annotation punctuation">@Entity</span>
<span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;tb_user&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">implements</span> <span class="token class-name">BaseEntity</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Id</span>
    <span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span><span class="token constant">IDENTITY</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> userName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>

    <span class="token comment">// 级联关系,关联的实体立即会被加载,二层级联</span>
    <span class="token annotation punctuation">@ManyToMany</span><span class="token punctuation">(</span>cascade <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">CascadeType</span><span class="token punctuation">.</span><span class="token constant">REFRESH</span><span class="token punctuation">}</span><span class="token punctuation">,</span> fetch <span class="token operator">=</span> <span class="token class-name">FetchType</span><span class="token punctuation">.</span><span class="token constant">EAGER</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@JoinTable</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;tb_user_role&quot;</span><span class="token punctuation">,</span> joinColumns <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@JoinColumn</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;user_id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>inverseJoinColumns <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token annotation punctuation">@JoinColumn</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;role_id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Role</span><span class="token punctuation">&gt;</span></span> roles<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Getter</span>
<span class="token annotation punctuation">@Setter</span>
<span class="token annotation punctuation">@ToString</span>
<span class="token annotation punctuation">@Entity</span>
<span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;tb_role&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Role</span> <span class="token keyword">implements</span> <span class="token class-name">BaseEntity</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Id</span>
    <span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span><span class="token constant">IDENTITY</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span>nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> roleKey<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> description<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">LocalDateTime</span> createTime<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">LocalDateTime</span> updateTime<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>服务接口，服务实现类, 需要使用数据访问对象</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoleDoServiceImpl</span> <span class="token keyword">extends</span> <span class="token class-name">BaseDoServiceImpl</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Role</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">IRoleService</span> <span class="token punctuation">{</span>


    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">IRoleDao</span> roleDao<span class="token punctuation">;</span>


    <span class="token keyword">public</span> <span class="token class-name">RoleDoServiceImpl</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">IRoleDao</span> roleDao2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>roleDao <span class="token operator">=</span> roleDao2<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">IBaseDao</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Role</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> <span class="token function">getBaseDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>roleDao<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Role</span><span class="token punctuation">&gt;</span></span> <span class="token function">findPage</span><span class="token punctuation">(</span><span class="token class-name">RoleQueryBean</span> roleQueryBean<span class="token punctuation">,</span> <span class="token class-name">PageRequest</span> pageRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Specification</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Role</span><span class="token punctuation">&gt;</span></span> specification <span class="token operator">=</span> <span class="token class-name">Specifications</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Role</span><span class="token punctuation">&gt;</span></span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">like</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>roleQueryBean<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span>roleQueryBean<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">like</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>roleQueryBean<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;description&quot;</span><span class="token punctuation">,</span> roleQueryBean<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>roleDao<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span>specification<span class="token punctuation">,</span> pageRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>封装一个返回结果的泛型类（这个不是JPA特点）</li></ol> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">ResponseResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">fail</span><span class="token punctuation">(</span><span class="token class-name">T</span> data<span class="token punctuation">,</span> <span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">ResponseResult</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">message</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token class-name">ResponseStatus</span><span class="token punctuation">.</span><span class="token constant">FAIL</span><span class="token punctuation">.</span><span class="token function">getResponseCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">timestamp</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><h2 id="springboot-mybatis"><a href="#springboot-mybatis" class="header-anchor">#</a> Springboot-Mybatis</h2> <h3 id="xml方式使用"><a href="#xml方式使用" class="header-anchor">#</a> xml方式使用</h3> <p><strong>要点</strong></p> <ol><li>配置yml mybatis连接选项  datasource连接选项</li> <li>配置dao  @Mapper注解</li> <li>配置实体对象，查询对象，返回的结果对象  类似于jpa</li> <li>配置service 接口+实现  类似与jpa</li> <li>controller中使用   类似与jpa</li> <li>mapper.xml 写SQL配置数据库查询语句和方法，表关联在resultmap中配置</li></ol> <h3 id="注解方式使用"><a href="#注解方式使用" class="header-anchor">#</a> 注解方式使用</h3> <ol><li>通过注解去实现mapper.xml里的功能,实际上知识一种框架的两种写法而已，本质并没有什么不同</li> <li>ResultMap 可以定义在随便一个方法上，支持ID引用进行复用</li> <li>表关联通过@Results+@Many注解实现 many连接到关联表的查询方法上  一对一可以使用@One注解</li> <li>id是否使用数据库自增，可以使用selectkey</li> <li>@Mapper注解告诉mybatis框架该接口是个mapper接口需要被框架应用扫描并生成实现类</li></ol> <ul><li>启用之后可以在方法上使用@Select  @Delect等注解</li></ul> <p>思考：</p> <ol><li>直接在方法上写注解是很不方便的，可以使用provider</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDaoProvider</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SQL</span> sql <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SQL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sql<span class="token punctuation">.</span><span class="token function">SELECT</span><span class="token punctuation">(</span><span class="token string">&quot;u.id, u.password, u.user_name, u.email, u.phone_number, u.description, u.create_time, u.update_time&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sql<span class="token punctuation">.</span><span class="token function">FROM</span><span class="token punctuation">(</span><span class="token string">&quot;tb_user u&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sql<span class="token punctuation">.</span><span class="token function">WHERE</span><span class="token punctuation">(</span><span class="token string">&quot;id = &quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> sql<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>通过@SelectProvider方法关联到定义的类和方法</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@ResultMap</span><span class="token punctuation">(</span><span class="token string">&quot;UserResult&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SelectProvider</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">UserDaoProvider</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token string">&quot;findById&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">User</span> <span class="token function">findById2</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="两者结合使用"><a href="#两者结合使用" class="header-anchor">#</a> 两者结合使用</h3> <ol><li>将复杂的SQL写在xml中，例如resultMap</li> <li>然后在方法上使用@ResultMap注解</li></ol> <p>原文链接 https://www.pdai.tech/md/spring/springboot/springboot-x-mysql-mybatis-anno.html</p> <h3 id="常见的坑"><a href="#常见的坑" class="header-anchor">#</a> 常见的坑</h3> <p>mybatis的xml映射文件中，注释一定要使用</p> <p>不能用--,用后者的话#{params} 会出错</p> <h2 id="pagehelper插件"><a href="#pagehelper插件" class="header-anchor">#</a> PageHelper插件</h2> <h3 id="引入插件"><a href="#引入插件" class="header-anchor">#</a> 引入插件</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.github.pagehelper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>pagehelper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>最新版本<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="配置拦截器插件"><a href="#配置拦截器插件" class="header-anchor">#</a> 配置拦截器插件</h3> <p>MyBatis的xml文件中配置</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- com.github.pagehelper为PageHelper类所在包名 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span> <span class="token attr-name">interceptor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.github.pagehelper.PageInterceptor<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 使用下面的方式配置参数，后面会有所有的参数介绍 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>param1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>官方文档 https://pagehelper.github.io/docs/howtouse/</p> <p>参数说明</p> <ul><li>helperDialect  指定数据库方言</li> <li>offsetAsPageNum true时将offset作为pagenum使用</li></ul> <h3 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">PageHelper</span><span class="token punctuation">.</span><span class="token function">startPage</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Country</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> countryMapper<span class="token punctuation">.</span><span class="token function">selectIf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="mybatis-plus"><a href="#mybatis-plus" class="header-anchor">#</a> Mybatis Plus</h2> <p>Mybatis Plus是对Mybatis的增强，启动后会自动注入基本CRUD，少量配置可实现单表大部分CRUD操作。</p> <ul><li>内置分页插件</li> <li>内置代码生成器</li> <li>内置性能分析插件</li></ul> <p>可以通过配置模板引擎，生成entity， Mapper Interface, Mapper xml, service ,controller代码</p> <h3 id="引入依赖"><a href="#引入依赖" class="header-anchor">#</a> 引入依赖</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>8.0.28<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-plus-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.5.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="yml配置"><a href="#yml配置" class="header-anchor">#</a> yml配置</h3> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">mybatis-plus</span><span class="token punctuation">:</span>
  <span class="token key atrule">configuration</span><span class="token punctuation">:</span>
    <span class="token key atrule">cache-enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">use-generated-keys</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">default-executor-type</span><span class="token punctuation">:</span> REUSE
    <span class="token key atrule">use-actual-param-name</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre></div><h3 id="使用-基于注解"><a href="#使用-基于注解" class="header-anchor">#</a> 使用(基于注解)</h3> <ol><li>Mapper层 继承 BaseMapper</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IUserDao</span> <span class="token keyword">extends</span> <span class="token class-name">BaseMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findList</span><span class="token punctuation">(</span><span class="token class-name">UserQueryBean</span> userQueryBean<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>Service层继承 ServiceImpl 并实现对应接口</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoleDoServiceImpl</span> <span class="token keyword">extends</span> <span class="token class-name">ServiceImpl</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">IRoleDao</span><span class="token punctuation">,</span> <span class="token class-name">Role</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">IRoleService</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>lambda函数式查询</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Role</span><span class="token punctuation">&gt;</span></span> <span class="token function">findList</span><span class="token punctuation">(</span><span class="token class-name">RoleQueryBean</span> roleQueryBean<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">lambdaQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">like</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>roleQueryBean<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Role</span><span class="token operator">::</span><span class="token function">getName</span><span class="token punctuation">,</span> roleQueryBean<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">like</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>roleQueryBean<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Role</span><span class="token operator">::</span><span class="token function">getDescription</span><span class="token punctuation">,</span> roleQueryBean<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">like</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>roleQueryBean<span class="token punctuation">.</span><span class="token function">getRoleKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Role</span><span class="token operator">::</span><span class="token function">getRoleKey</span><span class="token punctuation">,</span> roleQueryBean<span class="token punctuation">.</span><span class="token function">getRoleKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>分页采用内置的MybatisPlusIntercetor</li></ol> <div class="language- extra-class"><pre class="language-text"><code>@Bean
public PaginationInnerInterceptor paginationInnerInterceptor() {
    return new PaginationInnerInterceptor();
}
</code></pre></div><ol start="5"><li>复杂的关联查询，配置xml</li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>
<span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
<span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tech.pdai.springboot.mysql8.mybatisplus.anno.dao.IUserDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tech.pdai.springboot.mysql8.mybatisplus.anno.entity.User<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UserResult<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span>     <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span>       	<span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span>      		<span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userName<span class="token punctuation">&quot;</span></span>     <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user_name<span class="token punctuation">&quot;</span></span>    	<span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span>     <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span>    	<span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span>        <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span>        	<span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>phoneNumber<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>phone_number<span class="token punctuation">&quot;</span></span>  	<span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span>  	<span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createTime<span class="token punctuation">&quot;</span></span>   <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>create_time<span class="token punctuation">&quot;</span></span>  	<span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateTime<span class="token punctuation">&quot;</span></span>   <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update_time<span class="token punctuation">&quot;</span></span>  	<span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>roles<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tech.pdai.springboot.mysql8.mybatisplus.anno.entity.Role<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span>  <span class="token punctuation">/&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span>  <span class="token punctuation">/&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>roleKey<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>role_key<span class="token punctuation">&quot;</span></span>  <span class="token punctuation">/&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span>  <span class="token punctuation">/&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createTime<span class="token punctuation">&quot;</span></span>   <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>create_time<span class="token punctuation">&quot;</span></span>  	<span class="token punctuation">/&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateTime<span class="token punctuation">&quot;</span></span>   <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update_time<span class="token punctuation">&quot;</span></span>  	<span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collection</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
	
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sql</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectUserSql<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select u.id, u.password, u.user_name, u.email, u.phone_number, u.description, u.create_time, u.update_time, r.name, r.role_key, r.description, r.create_time, r.update_time
		from tb_user u
		left join tb_user_role ur on u.id=ur.user_id
		inner join tb_role r on ur.role_id=r.id
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sql</span><span class="token punctuation">&gt;</span></span>
	
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tech.pdai.springboot.mysql8.mybatisplus.anno.entity.query.UserQueryBean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UserResult<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">refid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectUserSql<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
		where u.id != 0
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userName != null and userName != ''<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			AND u.user_name like concat('%', #{user_name}, '%')
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description != null and description != ''<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			AND u.description like concat('%', #{description}, '%')
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>phoneNumber != null and phoneNumber != ''<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			AND u.phone_number like concat('%', #{phoneNumber}, '%')
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email != null and email != ''<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			AND u.email like concat('%', #{email}, '%')
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
	
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span> 
</code></pre></div><h2 id="字段隔离多租户"><a href="#字段隔离多租户" class="header-anchor">#</a> 字段隔离多租户</h2> <p>多用户公用相同的系统或程序组件，并且仍可确保用户数据的隔离性</p> <p>在数据存储上的实现方式：</p> <ul><li>DB隔离：独立数据库</li> <li>Schema隔离：共享数据库，隔离数据架构</li> <li>字段隔离，共享数据库，通过TenantID区分租户数量</li></ul> <p>使用TenantLineInnerInterceptor插件</p> <div class="language-java extra-class"><pre class="language-java"><code>        interceptor<span class="token punctuation">.</span><span class="token function">addInnerInterceptor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TenantLineInnerInterceptor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TenantLineHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 获取租户ID，实际应用可以从线程本地变量，请求参数，或者其他途径获取</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token class-name">Expression</span> <span class="token function">getTenantId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">LongValue</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 租户列名</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getTenantIdColumn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token string">&quot;tenant_id&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// 设置要忽略的表</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">ignoreTable</span><span class="token punctuation">(</span><span class="token class-name">String</span> tableName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
            <span class="token comment">// 插入数据是是否忽略租户拦截</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">ignoreInsert</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Column</span><span class="token punctuation">&gt;</span></span> columns<span class="token punctuation">,</span> <span class="token class-name">String</span> tenantIdColumn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token class-name">TenantLineHandler</span><span class="token punctuation">.</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">ignoreInsert</span><span class="token punctuation">(</span>columns<span class="token punctuation">,</span> tenantIdColumn<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>租户和用户的区别，租户之间数据是隔离的，用户不是</p> <h2 id="其他插件"><a href="#其他插件" class="header-anchor">#</a> 其他插件</h2> <ul><li>自动分页: PaginationInnerInterceptor</li> <li>多租户: TenantLineInnerInterceptor</li> <li>动态表名: DynamicTableNameInnerInterceptor</li> <li>乐观锁: OptimisticLockerInnerInterceptor</li> <li>sql 性能规范: IllegalSQLInnerInterceptor</li> <li>防止全表更新与删除: BlockAttackInnerInterceptor</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/21/2025, 10:16:44 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/back-end/springboot/SpringBoot热更新.html" class="prev">
        SpringBoot热更新
      </a></span> <span class="next"><a href="/back-end/springboot/SpringBoot连接Redis.html">
        SpringBoot连接Redis
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.894248b1.js" defer></script><script src="/assets/js/2.4829a41e.js" defer></script><script src="/assets/js/1.21e39df5.js" defer></script><script src="/assets/js/75.1792a08f.js" defer></script>
  </body>
</html>
